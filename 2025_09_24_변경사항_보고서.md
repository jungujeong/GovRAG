RAG 챗봇 시스템 변경사항 보고서

개요
- 기간: 2025-09-15 이후부터 2025-09-24 현재까지
- 기준: 2025-09-15 마지막 커밋 50a06c7 이후 변경분과 최신 상태
- 통계: 20개 파일 변경, 총 +3,040 / -150

주요 변경사항

1. 문서 범위 결정과 주제 전환
- 후속 질문에서 문서 범위를 유지하면서도 매 질문마다 근거를 새로 검색하도록 변경
- 검색 점수와 문서 겹침 비율을 활용해 주제 변경을 감지하고 필요 시 범위 확장
- 구성요소: 주제 전환 탐지 로직, 스코프 메타데이터 저장, 라우터 흐름 개선

2. 질의 이해력 강화
- 대화 요약과 핵심 개체 추출을 통해 문맥 보존 및 요약 기반 질의 처리
- 대명사 해소와 메타 질문(요약, 정리 등)에 대한 재작성 로직 추가
- 효과: 질문 명확화, 검색 품질 향상, 불필요한 재질문 감소

3. 생성 품질 및 정합성 강화
- 모델 출력에서 한국어 이질 문자를 제거하고 불필요한 태그를 정리
- 괄호 보강, 개체명 변형 교정 등 후처리로 문장 품질 개선
- 어휘·편집 거리·접두 일치 기반의 응답 검증으로 근거와의 일치도 향상

4. 인용 체계 고도화
- 허용 문서 기반 필터링으로 범위 밖 출처 제거
- 응답 내 인용 번호를 순차적으로 재정렬하고, 인용 맵을 통해 일관성 유지
- 효과: 출처 번호 혼선 감소, 재현성 향상

5. 세션과 스트리밍 안정성
- 첫 응답의 근거와 인용 정보를 세션에 저장해 후속 질문 품질 유지
- 클라이언트 중단 감지와 안전한 취소 처리로 스트리밍 도중 중단 대응 강화
- 세션 파일 관리, 비동기 저장, 레이트 리미팅 보강

6. 프론트엔드 및 서비스 연동
- 스트리밍 파이프라인 안정화와 에러 메시지 표준화
- 문서 인덱싱 상태 조회와 세션 초기화 흐름 개선
- 사용자 경험: 중단 안내, 상태 표시, 기본 동작 신뢰성 향상

성능 및 안정성
- 검색과 생성 과정의 정합성 향상으로 불필요한 재생성 감소
- 스트리밍 중단 시 복원력 강화, 오류 로그와 예외 처리 개선
- 전반적 응답 일관성과 출처 정확도 개선

결론
- 9월 15일 대비, 문서 범위 결정과 질문 재작성, 생성 후처리, 인용 체계, 세션/스트리밍 안정성에서 의미 있는 개선을 달성함
- 운영 시 주제 전환 관련 설정값을 환경에 맞게 조정하면 품질을 추가로 향상시킬 수 있음
